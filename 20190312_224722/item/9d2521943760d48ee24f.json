{"rendered_body": "<p>jsp\u306e\u30ab\u30b9\u30bf\u30e0\u30bf\u30b0\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u3042\u3063\u305f\u306e\u3067\u3001\u305d\u306e\u30e1\u30e2\u2015\u2015\u3068\u3044\u3046\u3088\u308a\u30b5\u30f3\u30d7\u30eb\u3067\u3059\u3002\u3054\u67fb\u53ce\u304f\u3060\u3055\u3044(\u00b4\u30fb\u03c9\u30fb\uff40)</p>\n\n<p>\u307e\u305a\u306f\u8981\u4ef6\u5b9a\u7fa9\u304b\u3089! \u30b5\u30f3\u30d7\u30eb\u3068\u3044\u3046\u3053\u3068\u3067\u7c21\u5358\u3067\u3059\u304c\u3001\u6b21\u306e\u3088\u3046\u306b\u307e\u3068\u3081\u3066\u307f\u307e\u3057\u305f\u3002</p>\n\n<ul>\n<li>\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u691c\u7d22\u7d50\u679c\u3092\u30d7\u30eb\u30c0\u30a6\u30f3\u3068\u3057\u3066\u8868\u793a\u3059\u308b\n\n<ul>\n<li>\u305f\u3060\u3057\u30b5\u30f3\u30d7\u30eb\u306a\u306e\u3067\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306f\u30e2\u30c3\u30af\u3068\u3057\u3066\u5b9f\u88c5\u3059\u308b\u3002</li>\n</ul>\n</li>\n<li>\u30bf\u30b0\u540d\u306f<code>sample:select</code>\u3002\u5fc5\u9808\u5c5e\u6027\u3068\u3057\u3066<code>group</code>\u3092\u6301\u3061\u3001\u3053\u308c\u3092\u30ad\u30fc\u306b\u3057\u3066\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u691c\u7d22\u3059\u308b\u3002</li>\n</ul>\n\n<h1>\n<span id=\"\u4e8b\u524d\u6e96\u5099-db\u30a2\u30af\u30bb\u30b9\u5c64\u3068servlet\u3092\u4f5c\u6210\u3059\u308b\" class=\"fragment\"></span><a href=\"#%E4%BA%8B%E5%89%8D%E6%BA%96%E5%82%99-db%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E5%B1%A4%E3%81%A8servlet%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>\u4e8b\u524d\u6e96\u5099: DB\u30a2\u30af\u30bb\u30b9\u5c64\u3068Servlet\u3092\u4f5c\u6210\u3059\u308b\u3002</h1>\n\n<p>DB\u306e\u691c\u7d22\u7d50\u679c\u3092\u8868\u793a\u3059\u308b\u30ab\u30b9\u30bf\u30e0\u30bf\u30b0\u3092\u4f5c\u308a\u305f\u3044\u3068\u3044\u3046\u3053\u3068\u3067\u3001DB\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3068\u305d\u306e\u691c\u7d22\u7d50\u679c\u3092\u793a\u3059\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u307e\u305fjsp\u3092\u8868\u793a\u3059\u308b\u305f\u3081\u306eServlet\u3082\u5fc5\u8981\u3068\u306a\u308b\u306e\u3067\u3001\u3053\u308c\u3082\u4f5c\u6210\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u304c\u305d\u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306b\u306a\u308a\u307e\u3059\u304c\u3001<strong>package\u5ba3\u8a00\u3001import\u5ba3\u8a00\u3001Getter\u304a\u3088\u3073Setter\u306f\u5197\u9577\u306a\u305f\u3081\u7701\u7565\u3057\u3066\u3044\u307e\u3059\u3002</strong>\u305f\u3060\u3057\u30d1\u30c3\u30b1\u30fc\u30b8\u69cb\u6210\u306b\u3064\u3044\u3066\u306f\u6700\u521d\u306b\u793a\u3059\u3001\u753b\u50cf\u3092\u3082\u3068\u306b\u5224\u65ad\u3057\u3066\u3082\u3089\u3048\u308b\u3068\u5e78\u3044\u3067\u3059(\u00b4\u30fb\u03c9\u30fb\uff40)</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/174ab4d85a834bc72d350d3e82b1459466c77683/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3130353835392f65376634353733612d633035362d633039332d353764352d6566633365343936656136352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/174ab4d85a834bc72d350d3e82b1459466c77683/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3130353835392f65376634353733612d633035362d633039332d353764352d6566633365343936656136352e706e67\" alt=\"image\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/105859/e7f4573a-c056-c093-57d5-efc3e496ea65.png\"></a></p>\n\n<div class=\"code-frame\" data-lang=\"java\">\n<div class=\"code-lang\"><span class=\"bold\">DB.java</span></div>\n<div class=\"highlight\"><pre><span class=\"cm\">/**\n * \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3078\u306e\u30a2\u30af\u30bb\u30b9\u30fb\u30af\u30e9\u30b9\u3002\u305f\u3060\u3057\u30b5\u30f3\u30d7\u30eb\u306e\u305f\u3081\u30e2\u30c3\u30af\u5b9f\u88c5\u3068\u3059\u308b\u3002\n */</span>\n<span class=\"kd\">public</span> <span class=\"kd\">class</span> <span class=\"nc\">DB</span> <span class=\"kd\">implements</span> <span class=\"n\">Serializable</span> <span class=\"o\">{</span>    \n    <span class=\"kd\">private</span> <span class=\"n\">List</span><span class=\"o\">&lt;</span><span class=\"n\">Row</span><span class=\"o\">&gt;</span> <span class=\"n\">rows</span><span class=\"o\">;</span>\n\n    <span class=\"cm\">/**\n     * \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3002\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3059\u308b\u3068\u3068\u3082\u306b\u3001\u30e2\u30c3\u30afDB\u3078\u306e\u521d\u671f\u30c7\u30fc\u30bf\u6295\u5165\u3092\u884c\u3046\u3002\n     */</span>\n    <span class=\"kd\">public</span> <span class=\"nf\">DB</span><span class=\"o\">()</span> <span class=\"o\">{</span>\n        <span class=\"k\">this</span><span class=\"o\">.</span><span class=\"na\">rows</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"n\">ArrayList</span><span class=\"o\">&lt;&gt;();</span>\n\n        <span class=\"k\">this</span><span class=\"o\">.</span><span class=\"na\">rows</span><span class=\"o\">.</span><span class=\"na\">add</span><span class=\"o\">(</span><span class=\"k\">new</span> <span class=\"n\">Row</span><span class=\"o\">(</span><span class=\"s\">\"group1\"</span><span class=\"o\">,</span> <span class=\"s\">\"A\"</span><span class=\"o\">,</span> <span class=\"s\">\"AAA\"</span><span class=\"o\">));</span>\n        <span class=\"k\">this</span><span class=\"o\">.</span><span class=\"na\">rows</span><span class=\"o\">.</span><span class=\"na\">add</span><span class=\"o\">(</span><span class=\"k\">new</span> <span class=\"n\">Row</span><span class=\"o\">(</span><span class=\"s\">\"group1\"</span><span class=\"o\">,</span> <span class=\"s\">\"B\"</span><span class=\"o\">,</span> <span class=\"s\">\"BBB\"</span><span class=\"o\">));</span>\n        <span class=\"k\">this</span><span class=\"o\">.</span><span class=\"na\">rows</span><span class=\"o\">.</span><span class=\"na\">add</span><span class=\"o\">(</span><span class=\"k\">new</span> <span class=\"n\">Row</span><span class=\"o\">(</span><span class=\"s\">\"group1\"</span><span class=\"o\">,</span> <span class=\"s\">\"C\"</span><span class=\"o\">,</span> <span class=\"s\">\"CCC\"</span><span class=\"o\">));</span>\n        <span class=\"k\">this</span><span class=\"o\">.</span><span class=\"na\">rows</span><span class=\"o\">.</span><span class=\"na\">add</span><span class=\"o\">(</span><span class=\"k\">new</span> <span class=\"n\">Row</span><span class=\"o\">(</span><span class=\"s\">\"group1\"</span><span class=\"o\">,</span> <span class=\"s\">\"D\"</span><span class=\"o\">,</span> <span class=\"s\">\"DDD\"</span><span class=\"o\">));</span>\n        <span class=\"k\">this</span><span class=\"o\">.</span><span class=\"na\">rows</span><span class=\"o\">.</span><span class=\"na\">add</span><span class=\"o\">(</span><span class=\"k\">new</span> <span class=\"n\">Row</span><span class=\"o\">(</span><span class=\"s\">\"group1\"</span><span class=\"o\">,</span> <span class=\"s\">\"E\"</span><span class=\"o\">,</span> <span class=\"s\">\"EEE\"</span><span class=\"o\">));</span>\n\n        <span class=\"k\">this</span><span class=\"o\">.</span><span class=\"na\">rows</span><span class=\"o\">.</span><span class=\"na\">add</span><span class=\"o\">(</span><span class=\"k\">new</span> <span class=\"n\">Row</span><span class=\"o\">(</span><span class=\"s\">\"group2\"</span><span class=\"o\">,</span> <span class=\"s\">\"a\"</span><span class=\"o\">,</span> <span class=\"s\">\"\u3042\u3042\u3042\"</span><span class=\"o\">));</span>\n        <span class=\"k\">this</span><span class=\"o\">.</span><span class=\"na\">rows</span><span class=\"o\">.</span><span class=\"na\">add</span><span class=\"o\">(</span><span class=\"k\">new</span> <span class=\"n\">Row</span><span class=\"o\">(</span><span class=\"s\">\"group2\"</span><span class=\"o\">,</span> <span class=\"s\">\"b\"</span><span class=\"o\">,</span> <span class=\"s\">\"\u3044\u3044\u3044\"</span><span class=\"o\">));</span>\n        <span class=\"k\">this</span><span class=\"o\">.</span><span class=\"na\">rows</span><span class=\"o\">.</span><span class=\"na\">add</span><span class=\"o\">(</span><span class=\"k\">new</span> <span class=\"n\">Row</span><span class=\"o\">(</span><span class=\"s\">\"group2\"</span><span class=\"o\">,</span> <span class=\"s\">\"c\"</span><span class=\"o\">,</span> <span class=\"s\">\"\u3046\u3046\u3046\"</span><span class=\"o\">));</span>\n        <span class=\"k\">this</span><span class=\"o\">.</span><span class=\"na\">rows</span><span class=\"o\">.</span><span class=\"na\">add</span><span class=\"o\">(</span><span class=\"k\">new</span> <span class=\"n\">Row</span><span class=\"o\">(</span><span class=\"s\">\"group2\"</span><span class=\"o\">,</span> <span class=\"s\">\"d\"</span><span class=\"o\">,</span> <span class=\"s\">\"\u3048\u3048\u3048\"</span><span class=\"o\">));</span>\n        <span class=\"k\">this</span><span class=\"o\">.</span><span class=\"na\">rows</span><span class=\"o\">.</span><span class=\"na\">add</span><span class=\"o\">(</span><span class=\"k\">new</span> <span class=\"n\">Row</span><span class=\"o\">(</span><span class=\"s\">\"group2\"</span><span class=\"o\">,</span> <span class=\"s\">\"e\"</span><span class=\"o\">,</span> <span class=\"s\">\"\u304a\u304a\u304a\"</span><span class=\"o\">));</span>\n    <span class=\"o\">}</span>\n\n    <span class=\"cm\">/**\n     * group\u3092\u30ad\u30fc\u306bDB\u3092\u691c\u7d22\u3059\u308b\u3002\n     * @param group group\u30ab\u30e9\u30e0\u306e\u5024\n     * @return  \u691c\u7d22\u7d50\u679c\n     */</span>\n    <span class=\"kd\">public</span> <span class=\"n\">List</span><span class=\"o\">&lt;</span><span class=\"n\">Row</span><span class=\"o\">&gt;</span> <span class=\"nf\">select</span><span class=\"o\">(</span><span class=\"n\">String</span> <span class=\"n\">group</span><span class=\"o\">)</span> <span class=\"o\">{</span>\n        <span class=\"k\">return</span> <span class=\"n\">rows</span><span class=\"o\">.</span><span class=\"na\">stream</span><span class=\"o\">()</span>\n                <span class=\"o\">.</span><span class=\"na\">filter</span><span class=\"o\">(</span><span class=\"n\">row</span> <span class=\"o\">-&gt;</span> <span class=\"n\">row</span><span class=\"o\">.</span><span class=\"na\">getGroup</span><span class=\"o\">().</span><span class=\"na\">equals</span><span class=\"o\">(</span><span class=\"n\">group</span><span class=\"o\">))</span>\n                <span class=\"o\">.</span><span class=\"na\">collect</span><span class=\"o\">(</span><span class=\"n\">Collectors</span><span class=\"o\">.</span><span class=\"na\">toList</span><span class=\"o\">());</span>\n    <span class=\"o\">}</span>\n<span class=\"o\">}</span>\n</pre></div>\n</div>\n\n<div class=\"code-frame\" data-lang=\"java\">\n<div class=\"code-lang\"><span class=\"bold\">Row.java</span></div>\n<div class=\"highlight\"><pre><span class=\"cm\">/**\n * com.sample.db.DB\u30af\u30e9\u30b9\u304c\u793a\u3059\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u884c\u3092\u3057\u3081\u3059Bean\u30af\u30e9\u30b9\u3002\n */</span>\n<span class=\"kd\">final</span> <span class=\"kd\">public</span> <span class=\"kd\">class</span> <span class=\"nc\">Row</span> <span class=\"kd\">implements</span> <span class=\"n\">Serializable</span> <span class=\"o\">{</span>\n    <span class=\"kd\">private</span> <span class=\"n\">String</span> <span class=\"n\">group</span><span class=\"o\">;</span>\n    <span class=\"kd\">private</span> <span class=\"n\">String</span> <span class=\"n\">id</span><span class=\"o\">;</span>\n    <span class=\"kd\">private</span> <span class=\"n\">String</span> <span class=\"n\">name</span><span class=\"o\">;</span>\n\n    <span class=\"kd\">public</span> <span class=\"nf\">Row</span><span class=\"o\">(</span><span class=\"n\">String</span> <span class=\"n\">group</span><span class=\"o\">,</span> <span class=\"n\">String</span> <span class=\"n\">id</span><span class=\"o\">,</span> <span class=\"n\">String</span> <span class=\"n\">name</span><span class=\"o\">)</span> <span class=\"o\">{</span>\n        <span class=\"k\">this</span><span class=\"o\">.</span><span class=\"na\">group</span> <span class=\"o\">=</span> <span class=\"n\">group</span><span class=\"o\">;</span>\n        <span class=\"k\">this</span><span class=\"o\">.</span><span class=\"na\">id</span> <span class=\"o\">=</span> <span class=\"n\">id</span><span class=\"o\">;</span>\n        <span class=\"k\">this</span><span class=\"o\">.</span><span class=\"na\">name</span> <span class=\"o\">=</span> <span class=\"n\">name</span><span class=\"o\">;</span>\n    <span class=\"o\">}</span>\n<span class=\"o\">}</span>\n</pre></div>\n</div>\n\n<div class=\"code-frame\" data-lang=\"java\">\n<div class=\"code-lang\"><span class=\"bold\">SampleServlet.java</span></div>\n<div class=\"highlight\"><pre><span class=\"cm\">/**\n * sample.jsp\u3092\u8868\u793a\u3059\u308b\u305f\u3081\u306e\u30b5\u30fc\u30d6\u30ec\u30c3\u30c8\u3002\n */</span>\n<span class=\"nd\">@WebServlet</span><span class=\"o\">(</span><span class=\"s\">\"/sample\"</span><span class=\"o\">)</span>\n<span class=\"kd\">public</span> <span class=\"kd\">class</span> <span class=\"nc\">SampleServlet</span> <span class=\"kd\">extends</span> <span class=\"n\">HttpServlet</span> <span class=\"o\">{</span>\n    <span class=\"nd\">@Override</span>\n    <span class=\"kd\">protected</span> <span class=\"kt\">void</span> <span class=\"nf\">doGet</span><span class=\"o\">(</span><span class=\"n\">HttpServletRequest</span> <span class=\"n\">request</span><span class=\"o\">,</span> <span class=\"n\">HttpServletResponse</span> <span class=\"n\">response</span><span class=\"o\">)</span> <span class=\"kd\">throws</span> <span class=\"n\">ServletException</span><span class=\"o\">,</span> <span class=\"n\">IOException</span> <span class=\"o\">{</span>\n        <span class=\"n\">RequestDispatcher</span> <span class=\"n\">dispatcher</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"na\">getRequestDispatcher</span><span class=\"o\">(</span><span class=\"s\">\"/WEB-INF/sample.jsp\"</span><span class=\"o\">);</span>\n        <span class=\"n\">dispatcher</span><span class=\"o\">.</span><span class=\"na\">forward</span><span class=\"o\">(</span><span class=\"n\">request</span><span class=\"o\">,</span> <span class=\"n\">response</span><span class=\"o\">);</span>\n    <span class=\"o\">}</span>\n<span class=\"o\">}</span>\n</pre></div>\n</div>\n\n<h1>\n<span id=\"\u30bf\u30b0\u30cf\u30f3\u30c9\u30e9\u3092\u5b9f\u88c5\u3059\u308b\" class=\"fragment\"></span><a href=\"#%E3%82%BF%E3%82%B0%E3%83%8F%E3%83%B3%E3%83%89%E3%83%A9%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>\u30bf\u30b0\u30cf\u30f3\u30c9\u30e9\u3092\u5b9f\u88c5\u3059\u308b\u3002</h1>\n\n<p>\u524d\u63d0\u6761\u4ef6\u304c\u6574\u3063\u305f\u3068\u3053\u308d\u3067\u3001\u30ab\u30b9\u30bf\u30e0\u30bf\u30b0\u306b\u5bfe\u5fdc\u3059\u308bJava\u30af\u30e9\u30b9\u3067\u3042\u308b\u30bf\u30b0\u30cf\u30f3\u30c9\u30e9\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\u30bf\u30b0\u30cf\u30f3\u30c9\u30e9\u306f\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3067\u3042\u308b<code>javax.servlet.jsp.tagext.Tag</code>\u3092\u5b9f\u88c5\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u5b9f\u73fe\u3057\u3001\u305d\u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002</p>\n\n<div class=\"code-frame\" data-lang=\"java\">\n<div class=\"code-lang\"><span class=\"bold\">Select.java</span></div>\n<div class=\"highlight\"><pre><span class=\"kd\">public</span> <span class=\"kd\">class</span> <span class=\"nc\">Select</span> <span class=\"kd\">implements</span> <span class=\"n\">Tag</span> <span class=\"o\">{</span>\n\n    <span class=\"kd\">private</span> <span class=\"n\">Tag</span> <span class=\"n\">parent</span><span class=\"o\">;</span>\n    <span class=\"kd\">private</span> <span class=\"n\">PageContext</span> <span class=\"n\">pageContext</span><span class=\"o\">;</span>\n    <span class=\"kd\">private</span> <span class=\"n\">String</span> <span class=\"n\">group</span><span class=\"o\">;</span>\n\n    <span class=\"nd\">@Override</span>\n    <span class=\"kd\">public</span> <span class=\"kt\">int</span> <span class=\"nf\">doStartTag</span><span class=\"o\">()</span> <span class=\"kd\">throws</span> <span class=\"n\">JspException</span> <span class=\"o\">{</span>\n        <span class=\"k\">return</span> <span class=\"n\">Tag</span><span class=\"o\">.</span><span class=\"na\">SKIP_BODY</span><span class=\"o\">;</span> <span class=\"c1\">// \u3053\u306e\u30bf\u30b0\u306fBody\u8981\u7d20\u3092\u6301\u305f\u306a\u3044\u3002</span>\n    <span class=\"o\">}</span>\n\n    <span class=\"nd\">@Override</span>\n    <span class=\"kd\">public</span> <span class=\"kt\">int</span> <span class=\"nf\">doEndTag</span><span class=\"o\">()</span> <span class=\"kd\">throws</span> <span class=\"n\">JspException</span> <span class=\"o\">{</span>\n        <span class=\"c1\">// group\u3092\u3082\u3068\u306bDB\u3092\u691c\u7d22\u3059\u308b\u3002</span>\n        <span class=\"n\">DB</span> <span class=\"n\">db</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"n\">DB</span><span class=\"o\">();</span>\n        <span class=\"n\">List</span><span class=\"o\">&lt;</span><span class=\"n\">Row</span><span class=\"o\">&gt;</span> <span class=\"n\">rows</span> <span class=\"o\">=</span> <span class=\"n\">db</span><span class=\"o\">.</span><span class=\"na\">select</span><span class=\"o\">(</span><span class=\"k\">this</span><span class=\"o\">.</span><span class=\"na\">group</span><span class=\"o\">);</span>\n\n        <span class=\"c1\">// DB\u3078\u306e\u691c\u7d22\u7d50\u679c\u3092\u3082\u3068\u306bselect\u30bf\u30b0\u3092\u52d5\u7684\u306b\u751f\u6210\u3059\u308b\u3002</span>\n        <span class=\"n\">String</span> <span class=\"n\">select</span> <span class=\"o\">=</span> <span class=\"n\">rows</span><span class=\"o\">.</span><span class=\"na\">stream</span><span class=\"o\">().</span><span class=\"na\">map</span><span class=\"o\">(</span><span class=\"n\">row</span> <span class=\"o\">-&gt;</span> <span class=\"o\">{</span>\n            <span class=\"n\">String</span> <span class=\"n\">id</span> <span class=\"o\">=</span> <span class=\"n\">row</span><span class=\"o\">.</span><span class=\"na\">getId</span><span class=\"o\">();</span>\n            <span class=\"n\">String</span> <span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"n\">row</span><span class=\"o\">.</span><span class=\"na\">getName</span><span class=\"o\">();</span>\n\n            <span class=\"k\">return</span> <span class=\"n\">String</span><span class=\"o\">.</span><span class=\"na\">format</span><span class=\"o\">(</span><span class=\"s\">\"&lt;option value=\\\"%s\\\"&gt;%s&lt;/option&gt;\"</span><span class=\"o\">,</span> <span class=\"n\">id</span><span class=\"o\">,</span> <span class=\"n\">name</span><span class=\"o\">);</span>\n        <span class=\"o\">}).</span><span class=\"na\">collect</span><span class=\"o\">(</span><span class=\"n\">Collectors</span><span class=\"o\">.</span><span class=\"na\">joining</span><span class=\"o\">(</span><span class=\"s\">\"\"</span><span class=\"o\">,</span> <span class=\"s\">\"&lt;select&gt;\"</span><span class=\"o\">,</span> <span class=\"s\">\"&lt;/select&gt;\"</span><span class=\"o\">));</span>\n\n        <span class=\"c1\">// \u751f\u6210\u3057\u305fselect\u30bf\u30b0\u3092\u52d5\u7684\u306b\u751f\u6210\u3059\u308b\u3002</span>\n        <span class=\"k\">try</span> <span class=\"o\">{</span>\n            <span class=\"n\">JspWriter</span> <span class=\"n\">out</span> <span class=\"o\">=</span> <span class=\"k\">this</span><span class=\"o\">.</span><span class=\"na\">pageContext</span><span class=\"o\">.</span><span class=\"na\">getOut</span><span class=\"o\">();</span>\n            <span class=\"n\">out</span><span class=\"o\">.</span><span class=\"na\">print</span><span class=\"o\">(</span><span class=\"n\">select</span><span class=\"o\">);</span>\n        <span class=\"o\">}</span> <span class=\"k\">catch</span> <span class=\"o\">(</span><span class=\"n\">IOException</span> <span class=\"n\">e</span><span class=\"o\">)</span> <span class=\"o\">{</span>\n            <span class=\"k\">throw</span> <span class=\"k\">new</span> <span class=\"nf\">JspException</span><span class=\"o\">(</span><span class=\"n\">e</span><span class=\"o\">);</span>\n        <span class=\"o\">}</span>\n\n       <span class=\"k\">return</span> <span class=\"n\">Tag</span><span class=\"o\">.</span><span class=\"na\">EVAL_PAGE</span><span class=\"o\">;</span> \n    <span class=\"o\">}</span>\n\n    <span class=\"nd\">@Override</span>\n    <span class=\"kd\">public</span> <span class=\"kt\">void</span> <span class=\"nf\">release</span><span class=\"o\">()</span> <span class=\"o\">{</span>\n    <span class=\"o\">}</span>\n\n    <span class=\"nd\">@Override</span>\n    <span class=\"kd\">public</span> <span class=\"n\">Tag</span> <span class=\"nf\">getParent</span><span class=\"o\">()</span> <span class=\"o\">{</span>\n        <span class=\"k\">return</span> <span class=\"k\">this</span><span class=\"o\">.</span><span class=\"na\">parent</span><span class=\"o\">;</span>\n    <span class=\"o\">}</span>\n\n    <span class=\"nd\">@Override</span>\n    <span class=\"kd\">public</span> <span class=\"kt\">void</span> <span class=\"nf\">setParent</span><span class=\"o\">(</span><span class=\"n\">Tag</span> <span class=\"n\">parent</span><span class=\"o\">)</span> <span class=\"o\">{</span>\n        <span class=\"k\">this</span><span class=\"o\">.</span><span class=\"na\">parent</span> <span class=\"o\">=</span> <span class=\"n\">parent</span><span class=\"o\">;</span>\n    <span class=\"o\">}</span>\n\n    <span class=\"nd\">@Override</span>\n    <span class=\"kd\">public</span> <span class=\"kt\">void</span> <span class=\"nf\">setPageContext</span><span class=\"o\">(</span><span class=\"n\">PageContext</span> <span class=\"n\">pageContext</span><span class=\"o\">)</span> <span class=\"o\">{</span>\n        <span class=\"k\">this</span><span class=\"o\">.</span><span class=\"na\">pageContext</span> <span class=\"o\">=</span> <span class=\"n\">pageContext</span><span class=\"o\">;</span>\n    <span class=\"o\">}</span>\n\n    <span class=\"kd\">public</span> <span class=\"n\">String</span> <span class=\"nf\">getGroup</span><span class=\"o\">()</span> <span class=\"o\">{</span>\n        <span class=\"k\">return</span> <span class=\"n\">group</span><span class=\"o\">;</span>\n    <span class=\"o\">}</span>\n\n    <span class=\"kd\">public</span> <span class=\"kt\">void</span> <span class=\"nf\">setGroup</span><span class=\"o\">(</span><span class=\"n\">String</span> <span class=\"n\">group</span><span class=\"o\">)</span> <span class=\"o\">{</span>\n        <span class=\"k\">this</span><span class=\"o\">.</span><span class=\"na\">group</span> <span class=\"o\">=</span> <span class=\"n\">group</span><span class=\"o\">;</span>\n    <span class=\"o\">}</span>\n<span class=\"o\">}</span>\n</pre></div>\n</div>\n\n<p>\u306a\u304a\u3053\u3053\u3067\u306e\u300c\u306f\u307e\u308a\u30dd\u30a4\u30f3\u30c8\u300d\u3068\u3057\u3066\u306f\u6b21\u306e\u4e8c\u3064\u304c\u3042\u308a\u307e\u3057\u305f\u3002</p>\n\n<ul>\n<li>\u5c5e\u6027\u306b\u5bfe\u5fdc\u3059\u308b\u30d5\u30a3\u30fc\u30eb\u30c9\u306a\u3089\u3073\u306bGetter\u304a\u3088\u3073Setter\u3092\u5b9f\u88c5\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n<ul>\n<li>\u4e0a\u8a18\u306e\u30b5\u30f3\u30d7\u30eb\u3067\u306f<code>private String group;</code> <code>getGroup</code> <code>setGroup</code>\u304c\u305d\u308c\u305e\u308c\u5b58\u5728\u3057\u306a\u3044\u3068\u3046\u307e\u304f\u3044\u304b\u306a\u3044\u3002</li>\n</ul>\n</li>\n<li>\n<code>JSPWriter</code>\u306f\u660e\u793a\u7684\u306b<code>close</code>\u3057\u306a\u3044\u3002</li>\n</ul>\n\n<h1>\n<span id=\"tld\u30d5\u30a1\u30a4\u30eb\u3092\u6e96\u5099\u3059\u308b\" class=\"fragment\"></span><a href=\"#tld%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E6%BA%96%E5%82%99%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>tld\u30d5\u30a1\u30a4\u30eb\u3092\u6e96\u5099\u3059\u308b\u3002</h1>\n\n<p>Java\u306e\u4e16\u754c\u306e\u4f4f\u4eba\u3067\u3042\u308b\u30bf\u30b0\u30cf\u30f3\u30c9\u30e9\u304c\u7528\u610f\u3067\u304d\u305f\u3068\u3053\u308d\u3067\u3001\u30bf\u30b0\u30cf\u30f3\u30c9\u30e9\u3068jsp\u306e\u4e16\u754c\u306e\u4f4f\u4eba\u3067\u3042\u308b\u30bf\u30b0\u3092\u7d50\u3073\u3064\u3051\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u3092\u8a2d\u5b9a\u3059\u308b\u306e\u304ctld\u30d5\u30a1\u30a4\u30eb\u3067\u3042\u308a\u3001\u305d\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u4ee5\u4e0b\u306b\u793a\u3057\u307e\u3059\u3002\u306a\u304a\u62e1\u5f35\u5b50\u306ftld\u3067\u3059\u304c\u3001\u5b9f\u614b\u3068\u3057\u3066\u306fxml\u5f62\u5f0f\u3067\u3059\u3002</p>\n\n<div class=\"code-frame\" data-lang=\"xml\">\n<div class=\"code-lang\"><span class=\"bold\">sample.tld</span></div>\n<div class=\"highlight\"><pre><span class=\"cp\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</span>\n\n<span class=\"nt\">&lt;taglib</span> \n    <span class=\"na\">xmlns=</span><span class=\"s\">\"http://java.sun.com/xml/ns/j2ee\"</span>\n    <span class=\"na\">xmlns:xsi=</span><span class=\"s\">\"http://www.w3.org/2001/XMLSchema-instance\"</span>\n    <span class=\"na\">xsi:schemaLocation=</span><span class=\"s\">\"http://java.sun.com/xml/ns/j2ee web-jsptaglibrary_2_0.xsd\"</span>\n    <span class=\"na\">version=</span><span class=\"s\">\"2.0\"</span><span class=\"nt\">&gt;</span>\n\n  <span class=\"nt\">&lt;tlib-version&gt;</span>1.0<span class=\"nt\">&lt;/tlib-version&gt;</span>\n  <span class=\"nt\">&lt;short-name&gt;</span>sample<span class=\"nt\">&lt;/short-name&gt;</span>\n\n  <span class=\"nt\">&lt;tag&gt;</span>\n    <span class=\"nt\">&lt;name&gt;</span>select<span class=\"nt\">&lt;/name&gt;</span>\n    <span class=\"nt\">&lt;tag-class&gt;</span>com.sample.tag.Select<span class=\"nt\">&lt;/tag-class&gt;</span>\n    <span class=\"nt\">&lt;body-content&gt;</span>empty<span class=\"nt\">&lt;/body-content&gt;</span>\n    <span class=\"nt\">&lt;attribute&gt;</span>\n        <span class=\"nt\">&lt;name&gt;</span>group<span class=\"nt\">&lt;/name&gt;</span>\n        <span class=\"nt\">&lt;required&gt;</span>true<span class=\"nt\">&lt;/required&gt;</span>\n    <span class=\"nt\">&lt;/attribute&gt;</span>\n  <span class=\"nt\">&lt;/tag&gt;</span>\n<span class=\"nt\">&lt;/taglib&gt;</span>\n</pre></div>\n</div>\n\n<h1>\n<span id=\"jsp\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066\u30c7\u30d7\u30ed\u30a4\u3059\u308b\" class=\"fragment\"></span><a href=\"#jsp%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E4%BD%9C%E6%88%90%E3%81%97%E3%81%A6%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>jsp\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3002</h1>\n\n<p>\u3042\u3068\u306f\u81ea\u4f5c\u3057\u305f\u30bf\u30b0\u3092\u5229\u7528\u3057\u305fjsp\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3001\u30b5\u30fc\u30d0\u306b\u30a2\u30d7\u30ea\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3059\u3002</p>\n\n<div class=\"code-frame\" data-lang=\"jsp\"><div class=\"highlight\"><pre>&lt;%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%&gt;\n&lt;%@taglib uri=\"sample.tld\" prefix=\"sample\" %&gt;\n\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n    &lt;head&gt;\n        &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"&gt;\n        &lt;title&gt;JSP Sample&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;h1&gt;JSP Sample&lt;/h1&gt;\n        &lt;p&gt;&lt;sample:select group=\"group1\" /&gt;&lt;/p&gt;\n        &lt;p&gt;&lt;sample:select group=\"group2\" /&gt;&lt;/p&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</pre></div></div>\n\n<p>\u6700\u5f8c\u306b\u7d50\u679c\u78ba\u8a8d\u3068\u3057\u3066Web\u30d6\u30e9\u30a6\u30b6\u306a\u3069\u3067<code>/jsp/sample</code>\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001\u6b21\u306e\u3088\u3046\u306a\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306b\u3088\u308a\u8868\u73fe\u3055\u308c\u308bWeb\u30da\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u308b\u306f\u305a\u3067\u3059\u3002</p>\n\n<div class=\"code-frame\" data-lang=\"html\"><div class=\"highlight\"><pre><span class=\"cp\">&lt;!DOCTYPE html&gt;</span>\n<span class=\"nt\">&lt;html&gt;</span>\n    <span class=\"nt\">&lt;head&gt;</span>\n        <span class=\"nt\">&lt;meta</span> <span class=\"na\">http-equiv=</span><span class=\"s\">\"Content-Type\"</span> <span class=\"na\">content=</span><span class=\"s\">\"text/html; charset=UTF-8\"</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;title&gt;</span>JSP Sample<span class=\"nt\">&lt;/title&gt;</span>\n    <span class=\"nt\">&lt;/head&gt;</span>\n    <span class=\"nt\">&lt;body&gt;</span>\n        <span class=\"nt\">&lt;h1&gt;</span>JSP Sample<span class=\"nt\">&lt;/h1&gt;</span>\n        <span class=\"nt\">&lt;p&gt;</span>\n            <span class=\"nt\">&lt;select&gt;</span>\n                <span class=\"nt\">&lt;option</span> <span class=\"na\">value=</span><span class=\"s\">\"A\"</span><span class=\"nt\">&gt;</span>AAA<span class=\"nt\">&lt;/option&gt;</span>\n                <span class=\"nt\">&lt;option</span> <span class=\"na\">value=</span><span class=\"s\">\"B\"</span><span class=\"nt\">&gt;</span>BBB<span class=\"nt\">&lt;/option&gt;</span>\n                <span class=\"nt\">&lt;option</span> <span class=\"na\">value=</span><span class=\"s\">\"C\"</span><span class=\"nt\">&gt;</span>CCC<span class=\"nt\">&lt;/option&gt;</span>\n                <span class=\"nt\">&lt;option</span> <span class=\"na\">value=</span><span class=\"s\">\"D\"</span><span class=\"nt\">&gt;</span>DDD<span class=\"nt\">&lt;/option&gt;</span>\n                <span class=\"nt\">&lt;option</span> <span class=\"na\">value=</span><span class=\"s\">\"E\"</span><span class=\"nt\">&gt;</span>EEE<span class=\"nt\">&lt;/option&gt;</span>\n            <span class=\"nt\">&lt;/select&gt;</span>\n        <span class=\"nt\">&lt;/p&gt;</span>\n        <span class=\"nt\">&lt;p&gt;</span>\n            <span class=\"nt\">&lt;select&gt;</span>\n                <span class=\"nt\">&lt;option</span> <span class=\"na\">value=</span><span class=\"s\">\"a\"</span><span class=\"nt\">&gt;</span>\u3042\u3042\u3042<span class=\"nt\">&lt;/option&gt;</span>\n                <span class=\"nt\">&lt;option</span> <span class=\"na\">value=</span><span class=\"s\">\"b\"</span><span class=\"nt\">&gt;</span>\u3044\u3044\u3044<span class=\"nt\">&lt;/option&gt;</span>\n                <span class=\"nt\">&lt;option</span> <span class=\"na\">value=</span><span class=\"s\">\"c\"</span><span class=\"nt\">&gt;</span>\u3046\u3046\u3046<span class=\"nt\">&lt;/option&gt;</span>\n                <span class=\"nt\">&lt;option</span> <span class=\"na\">value=</span><span class=\"s\">\"d\"</span><span class=\"nt\">&gt;</span>\u3048\u3048\u3048<span class=\"nt\">&lt;/option&gt;</span>\n                <span class=\"nt\">&lt;option</span> <span class=\"na\">value=</span><span class=\"s\">\"e\"</span><span class=\"nt\">&gt;</span>\u304a\u304a\u304a<span class=\"nt\">&lt;/option&gt;</span>\n            <span class=\"nt\">&lt;/select&gt;</span>\n        <span class=\"nt\">&lt;/p&gt;</span>\n    <span class=\"nt\">&lt;/body&gt;</span>\n<span class=\"nt\">&lt;/html&gt;</span>\n</pre></div></div>\n\n<p>\u304a\u308f\u308a(\uff40\u30fb\u03c9\u30fb\u00b4)\uff7c\uff6c\uff77\uff70\uff9d</p>\n", "body": "\njsp\u306e\u30ab\u30b9\u30bf\u30e0\u30bf\u30b0\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u3042\u3063\u305f\u306e\u3067\u3001\u305d\u306e\u30e1\u30e2\u2015\u2015\u3068\u3044\u3046\u3088\u308a\u30b5\u30f3\u30d7\u30eb\u3067\u3059\u3002\u3054\u67fb\u53ce\u304f\u3060\u3055\u3044(\u00b4\u30fb\u03c9\u30fb\uff40)\n\n\u307e\u305a\u306f\u8981\u4ef6\u5b9a\u7fa9\u304b\u3089! \u30b5\u30f3\u30d7\u30eb\u3068\u3044\u3046\u3053\u3068\u3067\u7c21\u5358\u3067\u3059\u304c\u3001\u6b21\u306e\u3088\u3046\u306b\u307e\u3068\u3081\u3066\u307f\u307e\u3057\u305f\u3002\n\n- \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u691c\u7d22\u7d50\u679c\u3092\u30d7\u30eb\u30c0\u30a6\u30f3\u3068\u3057\u3066\u8868\u793a\u3059\u308b\n    - \u305f\u3060\u3057\u30b5\u30f3\u30d7\u30eb\u306a\u306e\u3067\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306f\u30e2\u30c3\u30af\u3068\u3057\u3066\u5b9f\u88c5\u3059\u308b\u3002\n- \u30bf\u30b0\u540d\u306f`sample:select`\u3002\u5fc5\u9808\u5c5e\u6027\u3068\u3057\u3066`group`\u3092\u6301\u3061\u3001\u3053\u308c\u3092\u30ad\u30fc\u306b\u3057\u3066\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u691c\u7d22\u3059\u308b\u3002\n\n# \u4e8b\u524d\u6e96\u5099: DB\u30a2\u30af\u30bb\u30b9\u5c64\u3068Servlet\u3092\u4f5c\u6210\u3059\u308b\u3002\n\nDB\u306e\u691c\u7d22\u7d50\u679c\u3092\u8868\u793a\u3059\u308b\u30ab\u30b9\u30bf\u30e0\u30bf\u30b0\u3092\u4f5c\u308a\u305f\u3044\u3068\u3044\u3046\u3053\u3068\u3067\u3001DB\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3068\u305d\u306e\u691c\u7d22\u7d50\u679c\u3092\u793a\u3059\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u307e\u305fjsp\u3092\u8868\u793a\u3059\u308b\u305f\u3081\u306eServlet\u3082\u5fc5\u8981\u3068\u306a\u308b\u306e\u3067\u3001\u3053\u308c\u3082\u4f5c\u6210\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u304c\u305d\u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306b\u306a\u308a\u307e\u3059\u304c\u3001__package\u5ba3\u8a00\u3001import\u5ba3\u8a00\u3001Getter\u304a\u3088\u3073Setter\u306f\u5197\u9577\u306a\u305f\u3081\u7701\u7565\u3057\u3066\u3044\u307e\u3059\u3002__\u305f\u3060\u3057\u30d1\u30c3\u30b1\u30fc\u30b8\u69cb\u6210\u306b\u3064\u3044\u3066\u306f\u6700\u521d\u306b\u793a\u3059\u3001\u753b\u50cf\u3092\u3082\u3068\u306b\u5224\u65ad\u3057\u3066\u3082\u3089\u3048\u308b\u3068\u5e78\u3044\u3067\u3059(\u00b4\u30fb\u03c9\u30fb\uff40)\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/105859/e7f4573a-c056-c093-57d5-efc3e496ea65.png)\n\n```java:DB.java\n/**\n * \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3078\u306e\u30a2\u30af\u30bb\u30b9\u30fb\u30af\u30e9\u30b9\u3002\u305f\u3060\u3057\u30b5\u30f3\u30d7\u30eb\u306e\u305f\u3081\u30e2\u30c3\u30af\u5b9f\u88c5\u3068\u3059\u308b\u3002\n */\npublic class DB implements Serializable {    \n    private List<Row> rows;\n    \n    /**\n     * \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3002\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3059\u308b\u3068\u3068\u3082\u306b\u3001\u30e2\u30c3\u30afDB\u3078\u306e\u521d\u671f\u30c7\u30fc\u30bf\u6295\u5165\u3092\u884c\u3046\u3002\n     */\n    public DB() {\n        this.rows = new ArrayList<>();\n        \n        this.rows.add(new Row(\"group1\", \"A\", \"AAA\"));\n        this.rows.add(new Row(\"group1\", \"B\", \"BBB\"));\n        this.rows.add(new Row(\"group1\", \"C\", \"CCC\"));\n        this.rows.add(new Row(\"group1\", \"D\", \"DDD\"));\n        this.rows.add(new Row(\"group1\", \"E\", \"EEE\"));\n        \n        this.rows.add(new Row(\"group2\", \"a\", \"\u3042\u3042\u3042\"));\n        this.rows.add(new Row(\"group2\", \"b\", \"\u3044\u3044\u3044\"));\n        this.rows.add(new Row(\"group2\", \"c\", \"\u3046\u3046\u3046\"));\n        this.rows.add(new Row(\"group2\", \"d\", \"\u3048\u3048\u3048\"));\n        this.rows.add(new Row(\"group2\", \"e\", \"\u304a\u304a\u304a\"));\n    }\n    \n    /**\n     * group\u3092\u30ad\u30fc\u306bDB\u3092\u691c\u7d22\u3059\u308b\u3002\n     * @param group group\u30ab\u30e9\u30e0\u306e\u5024\n     * @return  \u691c\u7d22\u7d50\u679c\n     */\n    public List<Row> select(String group) {\n        return rows.stream()\n                .filter(row -> row.getGroup().equals(group))\n                .collect(Collectors.toList());\n    }\n}\n```\n\n```java:Row.java\n/**\n * com.sample.db.DB\u30af\u30e9\u30b9\u304c\u793a\u3059\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u884c\u3092\u3057\u3081\u3059Bean\u30af\u30e9\u30b9\u3002\n */\nfinal public class Row implements Serializable {\n    private String group;\n    private String id;\n    private String name;\n\n    public Row(String group, String id, String name) {\n        this.group = group;\n        this.id = id;\n        this.name = name;\n    }\n}\n```\n```java:SampleServlet.java\n/**\n * sample.jsp\u3092\u8868\u793a\u3059\u308b\u305f\u3081\u306e\u30b5\u30fc\u30d6\u30ec\u30c3\u30c8\u3002\n */\n@WebServlet(\"/sample\")\npublic class SampleServlet extends HttpServlet {\n    @Override\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n        RequestDispatcher dispatcher = request.getRequestDispatcher(\"/WEB-INF/sample.jsp\");\n        dispatcher.forward(request, response);\n    }\n}\n```\n\n# \u30bf\u30b0\u30cf\u30f3\u30c9\u30e9\u3092\u5b9f\u88c5\u3059\u308b\u3002\n\n\u524d\u63d0\u6761\u4ef6\u304c\u6574\u3063\u305f\u3068\u3053\u308d\u3067\u3001\u30ab\u30b9\u30bf\u30e0\u30bf\u30b0\u306b\u5bfe\u5fdc\u3059\u308bJava\u30af\u30e9\u30b9\u3067\u3042\u308b\u30bf\u30b0\u30cf\u30f3\u30c9\u30e9\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\u30bf\u30b0\u30cf\u30f3\u30c9\u30e9\u306f\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3067\u3042\u308b`javax.servlet.jsp.tagext.Tag`\u3092\u5b9f\u88c5\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u5b9f\u73fe\u3057\u3001\u305d\u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\n\n```java:Select.java\npublic class Select implements Tag {\n    \n    private Tag parent;\n    private PageContext pageContext;\n    private String group;\n    \n    @Override\n    public int doStartTag() throws JspException {\n        return Tag.SKIP_BODY; // \u3053\u306e\u30bf\u30b0\u306fBody\u8981\u7d20\u3092\u6301\u305f\u306a\u3044\u3002\n    }\n    \n    @Override\n    public int doEndTag() throws JspException {\n        // group\u3092\u3082\u3068\u306bDB\u3092\u691c\u7d22\u3059\u308b\u3002\n        DB db = new DB();\n        List<Row> rows = db.select(this.group);\n        \n        // DB\u3078\u306e\u691c\u7d22\u7d50\u679c\u3092\u3082\u3068\u306bselect\u30bf\u30b0\u3092\u52d5\u7684\u306b\u751f\u6210\u3059\u308b\u3002\n        String select = rows.stream().map(row -> {\n            String id = row.getId();\n            String name = row.getName();\n            \n            return String.format(\"<option value=\\\"%s\\\">%s</option>\", id, name);\n        }).collect(Collectors.joining(\"\", \"<select>\", \"</select>\"));\n        \n        // \u751f\u6210\u3057\u305fselect\u30bf\u30b0\u3092\u52d5\u7684\u306b\u751f\u6210\u3059\u308b\u3002\n        try {\n            JspWriter out = this.pageContext.getOut();\n            out.print(select);\n        } catch (IOException e) {\n            throw new JspException(e);\n        }\n        \n       return Tag.EVAL_PAGE; \n    }\n    \n    @Override\n    public void release() {\n    }\n    \n    @Override\n    public Tag getParent() {\n        return this.parent;\n    }\n    \n    @Override\n    public void setParent(Tag parent) {\n        this.parent = parent;\n    }\n   \n    @Override\n    public void setPageContext(PageContext pageContext) {\n        this.pageContext = pageContext;\n    }\n\n    public String getGroup() {\n        return group;\n    }\n\n    public void setGroup(String group) {\n        this.group = group;\n    }\n}\n```\n\n\u306a\u304a\u3053\u3053\u3067\u306e\u300c\u306f\u307e\u308a\u30dd\u30a4\u30f3\u30c8\u300d\u3068\u3057\u3066\u306f\u6b21\u306e\u4e8c\u3064\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n\n- \u5c5e\u6027\u306b\u5bfe\u5fdc\u3059\u308b\u30d5\u30a3\u30fc\u30eb\u30c9\u306a\u3089\u3073\u306bGetter\u304a\u3088\u3073Setter\u3092\u5b9f\u88c5\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n    - \u4e0a\u8a18\u306e\u30b5\u30f3\u30d7\u30eb\u3067\u306f`private String group;` `getGroup` `setGroup`\u304c\u305d\u308c\u305e\u308c\u5b58\u5728\u3057\u306a\u3044\u3068\u3046\u307e\u304f\u3044\u304b\u306a\u3044\u3002\n- `JSPWriter`\u306f\u660e\u793a\u7684\u306b`close`\u3057\u306a\u3044\u3002\n\n# tld\u30d5\u30a1\u30a4\u30eb\u3092\u6e96\u5099\u3059\u308b\u3002\n\nJava\u306e\u4e16\u754c\u306e\u4f4f\u4eba\u3067\u3042\u308b\u30bf\u30b0\u30cf\u30f3\u30c9\u30e9\u304c\u7528\u610f\u3067\u304d\u305f\u3068\u3053\u308d\u3067\u3001\u30bf\u30b0\u30cf\u30f3\u30c9\u30e9\u3068jsp\u306e\u4e16\u754c\u306e\u4f4f\u4eba\u3067\u3042\u308b\u30bf\u30b0\u3092\u7d50\u3073\u3064\u3051\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u3092\u8a2d\u5b9a\u3059\u308b\u306e\u304ctld\u30d5\u30a1\u30a4\u30eb\u3067\u3042\u308a\u3001\u305d\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u4ee5\u4e0b\u306b\u793a\u3057\u307e\u3059\u3002\u306a\u304a\u62e1\u5f35\u5b50\u306ftld\u3067\u3059\u304c\u3001\u5b9f\u614b\u3068\u3057\u3066\u306fxml\u5f62\u5f0f\u3067\u3059\u3002\n\n```xml:sample.tld\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\n<taglib \n    xmlns=\"http://java.sun.com/xml/ns/j2ee\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://java.sun.com/xml/ns/j2ee web-jsptaglibrary_2_0.xsd\"\n    version=\"2.0\">\n\n  <tlib-version>1.0</tlib-version>\n  <short-name>sample</short-name>\n\n  <tag>\n    <name>select</name>\n    <tag-class>com.sample.tag.Select</tag-class>\n    <body-content>empty</body-content>\n    <attribute>\n        <name>group</name>\n        <required>true</required>\n    </attribute>\n  </tag>\n</taglib>\n```\n\n# jsp\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3002\n\n\u3042\u3068\u306f\u81ea\u4f5c\u3057\u305f\u30bf\u30b0\u3092\u5229\u7528\u3057\u305fjsp\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3001\u30b5\u30fc\u30d0\u306b\u30a2\u30d7\u30ea\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3059\u3002\n\n```jsp\n<%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n<%@taglib uri=\"sample.tld\" prefix=\"sample\" %>\n\n<!DOCTYPE html>\n<html>\n    <head>\n        <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n        <title>JSP Sample</title>\n    </head>\n    <body>\n        <h1>JSP Sample</h1>\n        <p><sample:select group=\"group1\" /></p>\n        <p><sample:select group=\"group2\" /></p>\n    </body>\n</html>\n```\n\n\u6700\u5f8c\u306b\u7d50\u679c\u78ba\u8a8d\u3068\u3057\u3066Web\u30d6\u30e9\u30a6\u30b6\u306a\u3069\u3067`/jsp/sample`\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001\u6b21\u306e\u3088\u3046\u306a\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306b\u3088\u308a\u8868\u73fe\u3055\u308c\u308bWeb\u30da\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u308b\u306f\u305a\u3067\u3059\u3002\n\n```html\n<!DOCTYPE html>\n<html>\n    <head>\n        <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n        <title>JSP Sample</title>\n    </head>\n    <body>\n        <h1>JSP Sample</h1>\n        <p>\n            <select>\n                <option value=\"A\">AAA</option>\n                <option value=\"B\">BBB</option>\n                <option value=\"C\">CCC</option>\n                <option value=\"D\">DDD</option>\n                <option value=\"E\">EEE</option>\n            </select>\n        </p>\n        <p>\n            <select>\n                <option value=\"a\">\u3042\u3042\u3042</option>\n                <option value=\"b\">\u3044\u3044\u3044</option>\n                <option value=\"c\">\u3046\u3046\u3046</option>\n                <option value=\"d\">\u3048\u3048\u3048</option>\n                <option value=\"e\">\u304a\u304a\u304a</option>\n            </select>\n        </p>\n    </body>\n</html>\n```\n\n\u304a\u308f\u308a(\uff40\u30fb\u03c9\u30fb\u00b4)\uff7c\uff6c\uff77\uff70\uff9d\n", "coediting": false, "comments_count": 1, "created_at": "2017-05-07T13:25:07+09:00", "group": null, "id": "9d2521943760d48ee24f", "likes_count": 1, "private": false, "reactions_count": 0, "tags": [{"name": "Java", "versions": []}, {"name": "JSP", "versions": []}], "title": "JSP\u306e\u30ab\u30b9\u30bf\u30e0\u30bf\u30b0\u3092\u4f5c\u6210\u3059\u308b\u30b5\u30f3\u30d7\u30eb", "updated_at": "2017-05-07T13:25:07+09:00", "url": "https://qiita.com/neko_the_shadow/items/9d2521943760d48ee24f", "user": {"description": "\u3044\u307e\u307e\u3067\u4f7f\u3063\u3066\u3044\u305f\u306f\u3066\u306a\u30d6\u30ed\u30b0\u304c\u3001\u63a8\u7406\u5c0f\u8aac\u3084\u5192\u967a\u5c0f\u8aac\u4e2d\u5fc3\u306e\u66f8\u8a55\u30d6\u30ed\u30b0\u3068\u5316\u3057\u305f\u306e\u3067\u3001\u6280\u8853\u7684\u5185\u5bb9\u306f\u3053\u3061\u3089\u3078\u5f15\u3063\u8d8a\u3057\u3066\u304d\u307e\u3057\u305f(\u00b4\u30fb\u03c9\u30fb`)", "facebook_id": "", "followees_count": 0, "followers_count": 21, "github_login_name": null, "id": "neko_the_shadow", "items_count": 124, "linkedin_id": "", "location": "\u795e\u5948\u5ddd\u770c\u5ddd\u5d0e\u5e02", "name": "", "organization": "", "permanent_id": 105859, "profile_image_url": "https://qiita-image-store.s3.amazonaws.com/0/105859/profile-images/1473709753", "team_only": false, "twitter_screen_name": "neko_the_shadow", "website_url": "https://nekotheshadow.github.io/"}, "page_views_count": null}