{"rendered_body": "<div class=\"code-frame\" data-lang=\"rb\"><div class=\"highlight\"><pre><span class=\"no\">File</span><span class=\"p\">.</span><span class=\"nf\">open</span><span class=\"p\">(</span><span class=\"s2\">\"sample.rb\"</span><span class=\"p\">,</span> <span class=\"s2\">\"r\"</span><span class=\"p\">,</span> <span class=\"ss\">:encoding</span> <span class=\"o\">=&gt;</span> <span class=\"no\">Encoding</span><span class=\"o\">::</span><span class=\"no\">CP932</span><span class=\"p\">)</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">file</span><span class=\"o\">|</span>\n  <span class=\"n\">file</span><span class=\"p\">.</span><span class=\"nf\">each_line</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">line</span><span class=\"o\">|</span>\n    <span class=\"n\">do_something</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"p\">)</span>\n  <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n</pre></div></div>\n\n<p>\u30d5\u30a1\u30a4\u30eb\u8aad\u307f\u8fbc\u307f\u51e6\u7406\u3092\u884c\u3046\u3068\u3001\u983b\u7e41\u306b\u51fa\u304f\u308f\u3059\u306e\u304c\u30a8\u30f3\u30b3\u30fc\u30c9\u95a2\u4fc2\u306e\u4f8b\u5916\u3002<code>Encoding::InvalidByteSequenceError</code>\u306a\u3069\u3001\u305d\u306e\u540d\u3082\u305a\u3070\u308a\u306a\u4f8b\u5916\u306f\u3082\u3061\u308d\u3093\u306e\u3053\u3068\u3001\u305f\u3068\u3048\u3070\u8aad\u307f\u8fbc\u3093\u3060\u884c\u306b\u5bfe\u3057\u3066<code>line.split(\",\")</code>\u3092\u5b9f\u884c\u3057\u305f\u3068\u305f\u3093\u3001<code>ArgumentError</code>\u304c\u767a\u751f\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u3082\u3042\u308a\u307e\u3059\u3002</p>\n\n<p>\u3053\u306e\u3088\u3046\u306a\u4f8b\u5916\u306f\u305f\u3044\u3066\u3044\u30d5\u30a1\u30a4\u30eb\u306b\u542b\u307e\u308c\u308b\u4e0d\u6b63\u306a\u30d0\u30a4\u30c8\u3084\u3084\u5909\u63db\u3067\u304d\u306a\u3044\u6587\u5b57\u304c\u539f\u56e0\u3067\u3059\u3002\u3067\u306f\u305d\u306e\u3088\u3046\u306a\u30d0\u30a4\u30c8\u3084\u6587\u5b57\u3092\u8aad\u307f\u8fbc\u3093\u3060\u5834\u5408\u3067\u3082\u3001\u4f8b\u5916\u3092\u767a\u751f\u3055\u305b\u308b\u306e\u3067\u306f\u306a\u304f\u3001\u3042\u305f\u304b\u3082\u6b63\u3057\u3044\u30d0\u30a4\u30c8\u3084\u6587\u5b57\u3092\u8aad\u307f\u8fbc\u3093\u3060\u304b\u306e\u3088\u3046\u306b\u3075\u308b\u307e\u308f\u305b\u308b\u306b\u306f\u3069\u3046\u3059\u308c\u3070\u3088\u3044\u3067\u3057\u3087\u3046\u304b? \u3042\u3051\u3059\u3051\u306b\u3044\u3063\u3066\u3057\u307e\u3046\u3068\u2015\u2015<strong>\u30d5\u30a1\u30a4\u30eb\u306e\u8aad\u307f\u8fbc\u307f\u6642\u306b\u6587\u5b57\u30b3\u30fc\u30c9\u95a2\u4fc2\u306e\u4f8b\u5916\u3092\u6291\u5236\u3059\u308b\u306b\u306f\u3069\u3046\u3059\u308c\u3070\u3088\u3044\u3067\u3057\u3087\u3046\u304b?</strong></p>\n\n<p><strong>\u5b9f\u306f<code>File#open</code>\u306e\u5f15\u6570\u3068\u3057\u3066\u3001<code>String#encode</code>\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</strong>\u3053\u308c\u3092\u5229\u7528\u3057\u307e\u3057\u3087\u3046\u3002\u305f\u3068\u3048\u3070\u300c\u8aad\u307f\u8fbc\u3093\u3060\u30d5\u30a1\u30a4\u30eb\u306b\u4e0d\u6b63\u306a\u30d0\u30a4\u30c8\u3084\u5909\u63db\u4e0d\u53ef\u80fd\u6587\u5b57\u304c\u542b\u307e\u308c\u3066\u3044\u305f\u5834\u5408\u3067\u3082\u4f8b\u5916\u3092\u767a\u751f\u3055\u305b\u308b\u306e\u3067\u306f\u306a\u304f\u3001\u7121\u8996\u3057\u3066\u51e6\u7406\u3092\u5b9f\u884c\u3057\u305f\u3044\u300d\u3068\u3044\u3046\u3068\u304d\u306b\u306f\u6b21\u306e\u3088\u3046\u306b\u66f8\u304d\u307e\u3059\u3002</p>\n\n<div class=\"code-frame\" data-lang=\"rb\"><div class=\"highlight\"><pre><span class=\"no\">File</span><span class=\"p\">.</span><span class=\"nf\">open</span><span class=\"p\">(</span><span class=\"s2\">\"sample.rb\"</span><span class=\"p\">,</span> <span class=\"s2\">\"r\"</span><span class=\"p\">,</span> <span class=\"ss\">:encoding</span> <span class=\"o\">=&gt;</span> <span class=\"no\">Encoding</span><span class=\"o\">::</span><span class=\"no\">CP932</span><span class=\"p\">,</span> <span class=\"ss\">:invalid</span> <span class=\"o\">=&gt;</span> <span class=\"ss\">:replace</span><span class=\"p\">,</span> <span class=\"ss\">:undef</span> <span class=\"o\">=&gt;</span> <span class=\"ss\">:replace</span><span class=\"p\">)</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">file</span><span class=\"o\">|</span>\n  <span class=\"n\">file</span><span class=\"p\">.</span><span class=\"nf\">each_line</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">line</span><span class=\"o\">|</span>\n    <span class=\"n\">do_something</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"p\">)</span>\n  <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n</pre></div></div>\n\n<p>\u3053\u306e\u4f8b\u3067\u306f\u300c\u4e0d\u6b63\u306a\u6587\u5b57\u300d\u306f\u7f6e\u63db\u3055\u308c\u308b\u305f\u3081\u3001\u4f8b\u5916\u306e\u767a\u751f\u304c\u6291\u5236\u3055\u308c\u308b\u306e\u3067\u3059\u304c\u3001\u4e00\u65b9\u3067<strong>\u60c5\u5831\u304c\u5931\u308f\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u3053\u3068\u306b\u3082\u6ce8\u610f\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</strong>\u305f\u3060\u3057\u300c\u30d5\u30a1\u30a4\u30eb\u51e6\u7406\u306e\u305f\u3073\u306b<code>begin/rescue/retry</code>\u3092\u66f8\u304f\u9762\u5012\u3055\u300d\u300c\u5de8\u5927\u30d5\u30a1\u30a4\u30eb\u306e\u51e6\u7406\u4e2d\u306b\u4f8b\u5916\u304c\u8d77\u304d\u305f\u305f\u3081\u306b\u6700\u521d\u304b\u3089\u3084\u308a\u76f4\u3055\u306d\u3070\u306a\u3089\u306a\u3044\u7d76\u671b\u611f\u300d\u305d\u3057\u3066\u300c\u56f0\u96e3\u306a\u30c7\u30d0\u30c3\u30af\u306e\u7d50\u679c\u3001\u305d\u306e\u4f8b\u5916\u304c\u672c\u8cea\u7684\u3067\u306f\u306a\u3044\u3068\u3053\u308d\u3067\u8d77\u304d\u305f\u3053\u3068\u304c\u5206\u304b\u3063\u305f\u6642\u306e\u3084\u308b\u305b\u306a\u3055\u300d\u306a\u3069\u306a\u3069\u3092\u52d8\u6848\u3059\u308b\u3068\u3001\u60c5\u5831\u3092\u5931\u3046\u3053\u3068\u3092\u899a\u609f\u3067\u300c\u4e0d\u6b63\u306a\u6587\u5b57\u300d\u3092\u6368\u3066\u3066\u3057\u307e\u3046\u306e\u304c\u3082\u3063\u3068\u3082\u73fe\u5b9f\u7684\u3060\u3068\u306f\u601d\u3044\u307e\u3059\u3002</p>\n\n<p>\u306a\u304a\u300c<code>File#open</code>\u306e\u5f15\u6570\u306b<code>String#encode</code>\u3068\u540c\u3058\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u6307\u5b9a\u3067\u304d\u308b\u300d\u3053\u3068\u3067\u3059\u304c\u3001<code>File#open</code>\u306e\u300c\u308b\u308a\u307e\u300d\u306b\u306f\u660e\u8a18\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u300c\u308b\u308a\u307e\u300d\u3067\u306f<code>IO#open</code>\u306b\u305d\u306e\u65e8\u304c\u5c11\u3057\u66f8\u304b\u308c\u3066\u3044\u308b\u3060\u3051\u3067\u3001\u3084\u3084\u4e0d\u89aa\u5207\u306a\u3088\u3046\u306a\u6c17\u3082\u3057\u306a\u304f\u306f\u306a\u3044(\u00b4\u30fb\u03c9\u30fb\uff40)</p>\n\n<p>\u307e\u305f<strong><code>csv</code>\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u3082\u30d5\u30a1\u30a4\u30eb\u3092CSV\u5f62\u5f0f\u3068\u3057\u3066\u958b\u304f<code>CSV#open</code>\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u3061\u3089\u306e\u30e1\u30bd\u30c3\u30c9\u306f<code>String#encode</code>\u3068\u540c\u3058\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002</strong>\u540c\u3058\u540d\u524d\u306a\u306e\u306b\u3084\u3084\u3053\u3057\u3044(\u00b4\u30fb\u03c9\u30fb\uff40) \u3057\u305f\u304c\u3063\u3066<code>CSV#open</code>\u3092\u4f55\u3082\u8003\u3048\u305a\u306b\u4f7f\u3063\u3066\u3044\u308b\u3068\u3001\u6587\u5b57\u30b3\u30fc\u30c9\u304c\u3089\u307f\u306e\u4f8b\u5916\u304c\u983b\u767a\u3059\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002</p>\n\n<div class=\"code-frame\" data-lang=\"rb\"><div class=\"highlight\"><pre><span class=\"c1\"># \u3053\u306e\u66f8\u304d\u65b9\u3060\u3068\u300c\u4e0d\u6b63\u306a\u6587\u5b57\u300d\u306b\u51fa\u304f\u308f\u3059\u3068\u4f8b\u5916\u304c\u767a\u751f\u3059\u308b\u3002</span>\n<span class=\"nb\">require</span> <span class=\"s2\">\"csv\"</span>\n<span class=\"no\">CSV</span><span class=\"p\">.</span><span class=\"nf\">open</span><span class=\"p\">(</span><span class=\"s2\">\"sample.csv\"</span><span class=\"p\">,</span> <span class=\"s2\">\"r\"</span><span class=\"p\">,</span> <span class=\"ss\">:encoding</span> <span class=\"o\">=&gt;</span> <span class=\"no\">Encoding</span><span class=\"o\">::</span><span class=\"no\">CP932</span><span class=\"p\">)</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">csv</span><span class=\"o\">|</span>\n  <span class=\"n\">csv</span><span class=\"p\">.</span><span class=\"nf\">each</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">row</span><span class=\"o\">|</span>\n    <span class=\"n\">do_something</span><span class=\"p\">(</span><span class=\"n\">row</span><span class=\"p\">)</span>\n  <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n</pre></div></div>\n\n<p>\u3053\u306e\u5bfe\u51e6\u6cd5\u306f\u5b9f\u306f\u7c21\u5358\u3067\u3059\u3002\u4e0a\u8ff0\u306e\u4f8b\u3067\u306f<code>CSV#open</code>\u306e\u5f15\u6570\u306b\u30d1\u30b9\u6587\u5b57\u5217\u3092\u4e0e\u3048\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u308c\u3092<code>File</code>\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\u305d\u3057\u3066\u3053\u306e<code>File</code>\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u751f\u6210\u3059\u308b<code>File#open</code>\u30e1\u30bd\u30c3\u30c9\u306e\u5f15\u6570\u3068\u3057\u3066\u3001<code>String#encode</code>\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3059\u308c\u3070\u3088\u3044\u3068\u3044\u3046\u308f\u3051\u3067\u3059\u3002</p>\n\n<div class=\"code-frame\" data-lang=\"rb\"><div class=\"highlight\"><pre><span class=\"c1\"># 2017-10-24: \u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306b\u8aa4\u308a\u304c\u3042\u3063\u305f\u305f\u3081\u4fee\u6b63</span>\n<span class=\"c1\"># require \"csv\"</span>\n<span class=\"c1\"># File.open(\"sample.csv\", \"r\", :encoding =&gt; Encoding::CP932, :invalid =&gt; :replace, :undef =&gt; :replace) do |file|</span>\n<span class=\"c1\">#   CSV.open(file) do |csv|</span>\n<span class=\"c1\">#     csv.each do |row|</span>\n<span class=\"c1\">#       do_something(row)</span>\n<span class=\"c1\">#     end</span>\n<span class=\"c1\">#   end</span>\n<span class=\"c1\"># end</span>\n\n<span class=\"nb\">require</span> <span class=\"s2\">\"csv\"</span>\n<span class=\"no\">File</span><span class=\"p\">.</span><span class=\"nf\">open</span><span class=\"p\">(</span><span class=\"s2\">\"sample.csv\"</span><span class=\"p\">,</span> <span class=\"s2\">\"r\"</span><span class=\"p\">,</span> <span class=\"ss\">:encoding</span> <span class=\"o\">=&gt;</span> <span class=\"no\">Encoding</span><span class=\"o\">::</span><span class=\"no\">CP932</span><span class=\"p\">,</span> <span class=\"ss\">:invalid</span> <span class=\"o\">=&gt;</span> <span class=\"ss\">:replace</span><span class=\"p\">,</span> <span class=\"ss\">:undef</span> <span class=\"o\">=&gt;</span> <span class=\"ss\">:replace</span><span class=\"p\">)</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">file</span><span class=\"o\">|</span>\n  <span class=\"no\">CSV</span><span class=\"p\">.</span><span class=\"nf\">parse</span><span class=\"p\">(</span><span class=\"n\">file</span><span class=\"p\">)</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">row</span><span class=\"o\">|</span>\n    <span class=\"n\">do_something</span><span class=\"p\">(</span><span class=\"n\">row</span><span class=\"p\">)</span>\n  <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n</pre></div></div>\n\n<p><strong>\u2605\u53c2\u8003\u2605</strong><br>\n- <code>File#open</code>: <a href=\"https://docs.ruby-lang.org/ja/latest/method/File/s/new.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://docs.ruby-lang.org/ja/latest/method/File/s/new.html</a><br>\n- <code>String#encode</code>: <a href=\"https://docs.ruby-lang.org/ja/latest/method/String/i/encode.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://docs.ruby-lang.org/ja/latest/method/String/i/encode.html</a><br>\n- <code>IO#open</code>: <a href=\"https://docs.ruby-lang.org/ja/latest/method/IO/s/open.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://docs.ruby-lang.org/ja/latest/method/IO/s/open.html</a><br>\n-  <code>CSV</code>: <a href=\"https://docs.ruby-lang.org/ja/latest/class/CSV.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://docs.ruby-lang.org/ja/latest/class/CSV.html</a></p>\n", "body": "\n```rb\nFile.open(\"sample.rb\", \"r\", :encoding => Encoding::CP932) do |file|\n  file.each_line do |line|\n    do_something(line)\n  end\nend\n```\n\n\u30d5\u30a1\u30a4\u30eb\u8aad\u307f\u8fbc\u307f\u51e6\u7406\u3092\u884c\u3046\u3068\u3001\u983b\u7e41\u306b\u51fa\u304f\u308f\u3059\u306e\u304c\u30a8\u30f3\u30b3\u30fc\u30c9\u95a2\u4fc2\u306e\u4f8b\u5916\u3002`Encoding::InvalidByteSequenceError `\u306a\u3069\u3001\u305d\u306e\u540d\u3082\u305a\u3070\u308a\u306a\u4f8b\u5916\u306f\u3082\u3061\u308d\u3093\u306e\u3053\u3068\u3001\u305f\u3068\u3048\u3070\u8aad\u307f\u8fbc\u3093\u3060\u884c\u306b\u5bfe\u3057\u3066`line.split(\",\")`\u3092\u5b9f\u884c\u3057\u305f\u3068\u305f\u3093\u3001`ArgumentError`\u304c\u767a\u751f\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u3082\u3042\u308a\u307e\u3059\u3002\n\n\u3053\u306e\u3088\u3046\u306a\u4f8b\u5916\u306f\u305f\u3044\u3066\u3044\u30d5\u30a1\u30a4\u30eb\u306b\u542b\u307e\u308c\u308b\u4e0d\u6b63\u306a\u30d0\u30a4\u30c8\u3084\u3084\u5909\u63db\u3067\u304d\u306a\u3044\u6587\u5b57\u304c\u539f\u56e0\u3067\u3059\u3002\u3067\u306f\u305d\u306e\u3088\u3046\u306a\u30d0\u30a4\u30c8\u3084\u6587\u5b57\u3092\u8aad\u307f\u8fbc\u3093\u3060\u5834\u5408\u3067\u3082\u3001\u4f8b\u5916\u3092\u767a\u751f\u3055\u305b\u308b\u306e\u3067\u306f\u306a\u304f\u3001\u3042\u305f\u304b\u3082\u6b63\u3057\u3044\u30d0\u30a4\u30c8\u3084\u6587\u5b57\u3092\u8aad\u307f\u8fbc\u3093\u3060\u304b\u306e\u3088\u3046\u306b\u3075\u308b\u307e\u308f\u305b\u308b\u306b\u306f\u3069\u3046\u3059\u308c\u3070\u3088\u3044\u3067\u3057\u3087\u3046\u304b? \u3042\u3051\u3059\u3051\u306b\u3044\u3063\u3066\u3057\u307e\u3046\u3068\u2015\u2015__\u30d5\u30a1\u30a4\u30eb\u306e\u8aad\u307f\u8fbc\u307f\u6642\u306b\u6587\u5b57\u30b3\u30fc\u30c9\u95a2\u4fc2\u306e\u4f8b\u5916\u3092\u6291\u5236\u3059\u308b\u306b\u306f\u3069\u3046\u3059\u308c\u3070\u3088\u3044\u3067\u3057\u3087\u3046\u304b?__\n\n__\u5b9f\u306f`File#open`\u306e\u5f15\u6570\u3068\u3057\u3066\u3001`String#encode`\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002__\u3053\u308c\u3092\u5229\u7528\u3057\u307e\u3057\u3087\u3046\u3002\u305f\u3068\u3048\u3070\u300c\u8aad\u307f\u8fbc\u3093\u3060\u30d5\u30a1\u30a4\u30eb\u306b\u4e0d\u6b63\u306a\u30d0\u30a4\u30c8\u3084\u5909\u63db\u4e0d\u53ef\u80fd\u6587\u5b57\u304c\u542b\u307e\u308c\u3066\u3044\u305f\u5834\u5408\u3067\u3082\u4f8b\u5916\u3092\u767a\u751f\u3055\u305b\u308b\u306e\u3067\u306f\u306a\u304f\u3001\u7121\u8996\u3057\u3066\u51e6\u7406\u3092\u5b9f\u884c\u3057\u305f\u3044\u300d\u3068\u3044\u3046\u3068\u304d\u306b\u306f\u6b21\u306e\u3088\u3046\u306b\u66f8\u304d\u307e\u3059\u3002\n\n```rb\nFile.open(\"sample.rb\", \"r\", :encoding => Encoding::CP932, :invalid => :replace, :undef => :replace) do |file|\n  file.each_line do |line|\n    do_something(line)\n  end\nend\n```\n\n\u3053\u306e\u4f8b\u3067\u306f\u300c\u4e0d\u6b63\u306a\u6587\u5b57\u300d\u306f\u7f6e\u63db\u3055\u308c\u308b\u305f\u3081\u3001\u4f8b\u5916\u306e\u767a\u751f\u304c\u6291\u5236\u3055\u308c\u308b\u306e\u3067\u3059\u304c\u3001\u4e00\u65b9\u3067__\u60c5\u5831\u304c\u5931\u308f\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u3053\u3068\u306b\u3082\u6ce8\u610f\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002__\u305f\u3060\u3057\u300c\u30d5\u30a1\u30a4\u30eb\u51e6\u7406\u306e\u305f\u3073\u306b`begin/rescue/retry`\u3092\u66f8\u304f\u9762\u5012\u3055\u300d\u300c\u5de8\u5927\u30d5\u30a1\u30a4\u30eb\u306e\u51e6\u7406\u4e2d\u306b\u4f8b\u5916\u304c\u8d77\u304d\u305f\u305f\u3081\u306b\u6700\u521d\u304b\u3089\u3084\u308a\u76f4\u3055\u306d\u3070\u306a\u3089\u306a\u3044\u7d76\u671b\u611f\u300d\u305d\u3057\u3066\u300c\u56f0\u96e3\u306a\u30c7\u30d0\u30c3\u30af\u306e\u7d50\u679c\u3001\u305d\u306e\u4f8b\u5916\u304c\u672c\u8cea\u7684\u3067\u306f\u306a\u3044\u3068\u3053\u308d\u3067\u8d77\u304d\u305f\u3053\u3068\u304c\u5206\u304b\u3063\u305f\u6642\u306e\u3084\u308b\u305b\u306a\u3055\u300d\u306a\u3069\u306a\u3069\u3092\u52d8\u6848\u3059\u308b\u3068\u3001\u60c5\u5831\u3092\u5931\u3046\u3053\u3068\u3092\u899a\u609f\u3067\u300c\u4e0d\u6b63\u306a\u6587\u5b57\u300d\u3092\u6368\u3066\u3066\u3057\u307e\u3046\u306e\u304c\u3082\u3063\u3068\u3082\u73fe\u5b9f\u7684\u3060\u3068\u306f\u601d\u3044\u307e\u3059\u3002\n\n\u306a\u304a\u300c`File#open`\u306e\u5f15\u6570\u306b`String#encode`\u3068\u540c\u3058\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u6307\u5b9a\u3067\u304d\u308b\u300d\u3053\u3068\u3067\u3059\u304c\u3001`File#open`\u306e\u300c\u308b\u308a\u307e\u300d\u306b\u306f\u660e\u8a18\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u300c\u308b\u308a\u307e\u300d\u3067\u306f`IO#open`\u306b\u305d\u306e\u65e8\u304c\u5c11\u3057\u66f8\u304b\u308c\u3066\u3044\u308b\u3060\u3051\u3067\u3001\u3084\u3084\u4e0d\u89aa\u5207\u306a\u3088\u3046\u306a\u6c17\u3082\u3057\u306a\u304f\u306f\u306a\u3044(\u00b4\u30fb\u03c9\u30fb\uff40)\n\n\u307e\u305f__`csv`\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u3082\u30d5\u30a1\u30a4\u30eb\u3092CSV\u5f62\u5f0f\u3068\u3057\u3066\u958b\u304f`CSV#open`\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u3061\u3089\u306e\u30e1\u30bd\u30c3\u30c9\u306f`String#encode`\u3068\u540c\u3058\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002__\u540c\u3058\u540d\u524d\u306a\u306e\u306b\u3084\u3084\u3053\u3057\u3044(\u00b4\u30fb\u03c9\u30fb\uff40) \u3057\u305f\u304c\u3063\u3066`CSV#open`\u3092\u4f55\u3082\u8003\u3048\u305a\u306b\u4f7f\u3063\u3066\u3044\u308b\u3068\u3001\u6587\u5b57\u30b3\u30fc\u30c9\u304c\u3089\u307f\u306e\u4f8b\u5916\u304c\u983b\u767a\u3059\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\n```rb\n# \u3053\u306e\u66f8\u304d\u65b9\u3060\u3068\u300c\u4e0d\u6b63\u306a\u6587\u5b57\u300d\u306b\u51fa\u304f\u308f\u3059\u3068\u4f8b\u5916\u304c\u767a\u751f\u3059\u308b\u3002\nrequire \"csv\"\nCSV.open(\"sample.csv\", \"r\", :encoding => Encoding::CP932) do |csv|\n  csv.each do |row|\n    do_something(row)\n  end\nend\n```\n\n\u3053\u306e\u5bfe\u51e6\u6cd5\u306f\u5b9f\u306f\u7c21\u5358\u3067\u3059\u3002\u4e0a\u8ff0\u306e\u4f8b\u3067\u306f`CSV#open`\u306e\u5f15\u6570\u306b\u30d1\u30b9\u6587\u5b57\u5217\u3092\u4e0e\u3048\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u308c\u3092`File`\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\u305d\u3057\u3066\u3053\u306e`File`\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u751f\u6210\u3059\u308b`File#open`\u30e1\u30bd\u30c3\u30c9\u306e\u5f15\u6570\u3068\u3057\u3066\u3001`String#encode`\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3059\u308c\u3070\u3088\u3044\u3068\u3044\u3046\u308f\u3051\u3067\u3059\u3002\n\n```rb\n# 2017-10-24: \u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306b\u8aa4\u308a\u304c\u3042\u3063\u305f\u305f\u3081\u4fee\u6b63\n# require \"csv\"\n# File.open(\"sample.csv\", \"r\", :encoding => Encoding::CP932, :invalid => :replace, :undef => :replace) do |file|\n#   CSV.open(file) do |csv|\n#     csv.each do |row|\n#       do_something(row)\n#     end\n#   end\n# end\n\nrequire \"csv\"\nFile.open(\"sample.csv\", \"r\", :encoding => Encoding::CP932, :invalid => :replace, :undef => :replace) do |file|\n  CSV.parse(file) do |row|\n    do_something(row)\n  end\nend\n```\n\n__\u2605\u53c2\u8003\u2605__\n- `File#open`: https://docs.ruby-lang.org/ja/latest/method/File/s/new.html\n- `String#encode`: https://docs.ruby-lang.org/ja/latest/method/String/i/encode.html\n- `IO#open`: https://docs.ruby-lang.org/ja/latest/method/IO/s/open.html\n-  `CSV`: https://docs.ruby-lang.org/ja/latest/class/CSV.html\n\n\n\n\n", "coediting": false, "comments_count": 6, "created_at": "2017-08-11T01:38:23+09:00", "group": null, "id": "b81289697d00efc5f12a", "likes_count": 1, "private": false, "reactions_count": 0, "tags": [{"name": "Ruby", "versions": []}], "title": "\u30d5\u30a1\u30a4\u30eb\u8aad\u307f\u8fbc\u307f\u306e\u969b\u306b\u6587\u5b57\u30b3\u30fc\u30c9\u95a2\u4fc2\u306e\u4f8b\u5916\u304c\u767a\u751f\u3059\u308b\u5834\u5408(File#open\u306e\u5f15\u6570\u306b\u306fString#encode\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u5229\u7528\u3067\u304d\u308b)", "updated_at": "2017-10-24T22:53:19+09:00", "url": "https://qiita.com/neko_the_shadow/items/b81289697d00efc5f12a", "user": {"description": "\u3044\u307e\u307e\u3067\u4f7f\u3063\u3066\u3044\u305f\u306f\u3066\u306a\u30d6\u30ed\u30b0\u304c\u3001\u63a8\u7406\u5c0f\u8aac\u3084\u5192\u967a\u5c0f\u8aac\u4e2d\u5fc3\u306e\u66f8\u8a55\u30d6\u30ed\u30b0\u3068\u5316\u3057\u305f\u306e\u3067\u3001\u6280\u8853\u7684\u5185\u5bb9\u306f\u3053\u3061\u3089\u3078\u5f15\u3063\u8d8a\u3057\u3066\u304d\u307e\u3057\u305f(\u00b4\u30fb\u03c9\u30fb`)", "facebook_id": "", "followees_count": 0, "followers_count": 21, "github_login_name": null, "id": "neko_the_shadow", "items_count": 124, "linkedin_id": "", "location": "\u795e\u5948\u5ddd\u770c\u5ddd\u5d0e\u5e02", "name": "", "organization": "", "permanent_id": 105859, "profile_image_url": "https://qiita-image-store.s3.amazonaws.com/0/105859/profile-images/1473709753", "team_only": false, "twitter_screen_name": "neko_the_shadow", "website_url": "https://nekotheshadow.github.io/"}, "page_views_count": null}