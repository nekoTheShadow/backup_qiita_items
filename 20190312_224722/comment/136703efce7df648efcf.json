{"body": "```java\nfinal String s = \"./any/path\";\nfinal Path p = Paths.get(s);\n\nfinal Stream<Path> files = Files.walk(p.toAbsolutePath())\n        .filter(Files::isRegularFile);\n\nfiles.forEach(System.out::println);\n```\n\n\u5b9f\u969b(\u73fe\u5b9f)\u306b\u306fopengl-8080\u3055\u3093\u306e\u8a18\u4e8b\u306e\u3088\u3046\u306b`FileVisitor`\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u306b\u306a\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n`Files.walk()`\u306f\u3001Windows\u3067`D:\\$RECYCLE.BIN`\u914d\u4e0b\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30a2\u30af\u30bb\u30b9\u6642\u306a\u3069\u306b`AccessDeniedException`\u304c\u767a\u751f\u3059\u308b\u306e\u3067\u3002\n\n```Main.java\npublic class Main {\n\n    @FunctionalInterface\n    interface FilePathVisitor extends FileVisitor<Path>, Consumer<Path> {\n        @Override\n        default FileVisitResult visitFile(Path file, BasicFileAttributes attrs) throws IOException {\n            accept(file);\n            return FileVisitResult.CONTINUE;\n        }\n\n        @Override\n        default FileVisitResult preVisitDirectory(Path dir, BasicFileAttributes attrs) throws IOException {\n            return FileVisitResult.CONTINUE;\n        }\n\n        @Override\n        default FileVisitResult postVisitDirectory(Path dir, IOException exc) throws IOException {\n            return FileVisitResult.CONTINUE;\n        }\n\n        @Override\n        default FileVisitResult visitFileFailed(Path file, IOException exc) throws IOException {\n            return FileVisitResult.CONTINUE;\n        }\n    }\n\n    private static void visit(Path start, FilePathVisitor visitor) throws IOException {\n        Files.walkFileTree(start, visitor);\n    }\n\n    public static void main(String[] args) throws IOException {\n        final Path p = Paths.get(\"./any/path\").toAbsolutePath();\n        visit(p, System.out::println);\n    }\n\n}\n```\n", "created_at": "2016-12-29T03:47:07+09:00", "id": "136703efce7df648efcf", "rendered_body": "<div class=\"code-frame\" data-lang=\"java\"><div class=\"highlight\"><pre><span class=\"kd\">final</span> <span class=\"n\">String</span> <span class=\"n\">s</span> <span class=\"o\">=</span> <span class=\"s\">\"./any/path\"</span><span class=\"o\">;</span>\n<span class=\"kd\">final</span> <span class=\"n\">Path</span> <span class=\"n\">p</span> <span class=\"o\">=</span> <span class=\"n\">Paths</span><span class=\"o\">.</span><span class=\"na\">get</span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"o\">);</span>\n\n<span class=\"kd\">final</span> <span class=\"n\">Stream</span><span class=\"o\">&lt;</span><span class=\"n\">Path</span><span class=\"o\">&gt;</span> <span class=\"n\">files</span> <span class=\"o\">=</span> <span class=\"n\">Files</span><span class=\"o\">.</span><span class=\"na\">walk</span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"o\">.</span><span class=\"na\">toAbsolutePath</span><span class=\"o\">())</span>\n        <span class=\"o\">.</span><span class=\"na\">filter</span><span class=\"o\">(</span><span class=\"nl\">Files:</span><span class=\"o\">:</span><span class=\"n\">isRegularFile</span><span class=\"o\">);</span>\n\n<span class=\"n\">files</span><span class=\"o\">.</span><span class=\"na\">forEach</span><span class=\"o\">(</span><span class=\"n\">System</span><span class=\"o\">.</span><span class=\"na\">out</span><span class=\"o\">::</span><span class=\"n\">println</span><span class=\"o\">);</span>\n</pre></div></div>\n\n<p>\u5b9f\u969b(\u73fe\u5b9f)\u306b\u306fopengl-8080\u3055\u3093\u306e\u8a18\u4e8b\u306e\u3088\u3046\u306b<code>FileVisitor</code>\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u306b\u306a\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002<br>\n<code>Files.walk()</code>\u306f\u3001Windows\u3067<code>D:\\$RECYCLE.BIN</code>\u914d\u4e0b\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30a2\u30af\u30bb\u30b9\u6642\u306a\u3069\u306b<code>AccessDeniedException</code>\u304c\u767a\u751f\u3059\u308b\u306e\u3067\u3002</p>\n\n<div class=\"code-frame\" data-lang=\"java\">\n<div class=\"code-lang\"><span class=\"bold\">Main.java</span></div>\n<div class=\"highlight\"><pre><span class=\"kd\">public</span> <span class=\"kd\">class</span> <span class=\"nc\">Main</span> <span class=\"o\">{</span>\n\n    <span class=\"nd\">@FunctionalInterface</span>\n    <span class=\"kd\">interface</span> <span class=\"nc\">FilePathVisitor</span> <span class=\"kd\">extends</span> <span class=\"n\">FileVisitor</span><span class=\"o\">&lt;</span><span class=\"n\">Path</span><span class=\"o\">&gt;,</span> <span class=\"n\">Consumer</span><span class=\"o\">&lt;</span><span class=\"n\">Path</span><span class=\"o\">&gt;</span> <span class=\"o\">{</span>\n        <span class=\"nd\">@Override</span>\n        <span class=\"k\">default</span> <span class=\"n\">FileVisitResult</span> <span class=\"nf\">visitFile</span><span class=\"o\">(</span><span class=\"n\">Path</span> <span class=\"n\">file</span><span class=\"o\">,</span> <span class=\"n\">BasicFileAttributes</span> <span class=\"n\">attrs</span><span class=\"o\">)</span> <span class=\"kd\">throws</span> <span class=\"n\">IOException</span> <span class=\"o\">{</span>\n            <span class=\"n\">accept</span><span class=\"o\">(</span><span class=\"n\">file</span><span class=\"o\">);</span>\n            <span class=\"k\">return</span> <span class=\"n\">FileVisitResult</span><span class=\"o\">.</span><span class=\"na\">CONTINUE</span><span class=\"o\">;</span>\n        <span class=\"o\">}</span>\n\n        <span class=\"nd\">@Override</span>\n        <span class=\"k\">default</span> <span class=\"n\">FileVisitResult</span> <span class=\"nf\">preVisitDirectory</span><span class=\"o\">(</span><span class=\"n\">Path</span> <span class=\"n\">dir</span><span class=\"o\">,</span> <span class=\"n\">BasicFileAttributes</span> <span class=\"n\">attrs</span><span class=\"o\">)</span> <span class=\"kd\">throws</span> <span class=\"n\">IOException</span> <span class=\"o\">{</span>\n            <span class=\"k\">return</span> <span class=\"n\">FileVisitResult</span><span class=\"o\">.</span><span class=\"na\">CONTINUE</span><span class=\"o\">;</span>\n        <span class=\"o\">}</span>\n\n        <span class=\"nd\">@Override</span>\n        <span class=\"k\">default</span> <span class=\"n\">FileVisitResult</span> <span class=\"nf\">postVisitDirectory</span><span class=\"o\">(</span><span class=\"n\">Path</span> <span class=\"n\">dir</span><span class=\"o\">,</span> <span class=\"n\">IOException</span> <span class=\"n\">exc</span><span class=\"o\">)</span> <span class=\"kd\">throws</span> <span class=\"n\">IOException</span> <span class=\"o\">{</span>\n            <span class=\"k\">return</span> <span class=\"n\">FileVisitResult</span><span class=\"o\">.</span><span class=\"na\">CONTINUE</span><span class=\"o\">;</span>\n        <span class=\"o\">}</span>\n\n        <span class=\"nd\">@Override</span>\n        <span class=\"k\">default</span> <span class=\"n\">FileVisitResult</span> <span class=\"nf\">visitFileFailed</span><span class=\"o\">(</span><span class=\"n\">Path</span> <span class=\"n\">file</span><span class=\"o\">,</span> <span class=\"n\">IOException</span> <span class=\"n\">exc</span><span class=\"o\">)</span> <span class=\"kd\">throws</span> <span class=\"n\">IOException</span> <span class=\"o\">{</span>\n            <span class=\"k\">return</span> <span class=\"n\">FileVisitResult</span><span class=\"o\">.</span><span class=\"na\">CONTINUE</span><span class=\"o\">;</span>\n        <span class=\"o\">}</span>\n    <span class=\"o\">}</span>\n\n    <span class=\"kd\">private</span> <span class=\"kd\">static</span> <span class=\"kt\">void</span> <span class=\"nf\">visit</span><span class=\"o\">(</span><span class=\"n\">Path</span> <span class=\"n\">start</span><span class=\"o\">,</span> <span class=\"n\">FilePathVisitor</span> <span class=\"n\">visitor</span><span class=\"o\">)</span> <span class=\"kd\">throws</span> <span class=\"n\">IOException</span> <span class=\"o\">{</span>\n        <span class=\"n\">Files</span><span class=\"o\">.</span><span class=\"na\">walkFileTree</span><span class=\"o\">(</span><span class=\"n\">start</span><span class=\"o\">,</span> <span class=\"n\">visitor</span><span class=\"o\">);</span>\n    <span class=\"o\">}</span>\n\n    <span class=\"kd\">public</span> <span class=\"kd\">static</span> <span class=\"kt\">void</span> <span class=\"nf\">main</span><span class=\"o\">(</span><span class=\"n\">String</span><span class=\"o\">[]</span> <span class=\"n\">args</span><span class=\"o\">)</span> <span class=\"kd\">throws</span> <span class=\"n\">IOException</span> <span class=\"o\">{</span>\n        <span class=\"kd\">final</span> <span class=\"n\">Path</span> <span class=\"n\">p</span> <span class=\"o\">=</span> <span class=\"n\">Paths</span><span class=\"o\">.</span><span class=\"na\">get</span><span class=\"o\">(</span><span class=\"s\">\"./any/path\"</span><span class=\"o\">).</span><span class=\"na\">toAbsolutePath</span><span class=\"o\">();</span>\n        <span class=\"n\">visit</span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"o\">,</span> <span class=\"n\">System</span><span class=\"o\">.</span><span class=\"na\">out</span><span class=\"o\">::</span><span class=\"n\">println</span><span class=\"o\">);</span>\n    <span class=\"o\">}</span>\n\n<span class=\"o\">}</span>\n</pre></div>\n</div>\n", "updated_at": "2016-12-29T05:59:15+09:00", "user": {"description": "Windows love / \u3086\u308b\u3075\u308f\u7cfb\u958b\u767a\u8005 / \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30ec\u30d3\u30e5\u30fc\u30ac\u30c1\u52e2 /\r\n\r\n\u8ab0\u3082\u805e\u3044\u3066\u306a\u3044\u8a18\u4e8b\u3092\u3069\u3093\u3069\u3093\u6295\u7a3f\u3057\u3066\u3044\u304d\u307e\u3059", "facebook_id": "", "followees_count": 0, "followers_count": 9, "github_login_name": "harry0000", "id": "harry0000", "items_count": 20, "linkedin_id": "", "location": "Japan", "name": "", "organization": "", "permanent_id": 42716, "profile_image_url": "https://qiita-image-store.s3.amazonaws.com/0/42716/profile-images/1478281689", "team_only": false, "twitter_screen_name": "harry0000jp", "website_url": ""}}